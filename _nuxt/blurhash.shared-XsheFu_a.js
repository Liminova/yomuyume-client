(function(){"use strict";const E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",m=(t,n,e)=>{let s=0;for(;n<e;)s*=83,s+=E.indexOf(t[n++]);return s},A=Math.pow,i=Math.PI,F=i*2,D=3294.6,L=269.025,G=t=>t>10.31475?A(t/L+.052132,2.4):t/D,R=t=>~~(t>1227e-8?L*A(t,.416666)-13.025:t*D+1),l=t=>(t<0?-1:1)*t*t,P=t=>{for(t+=i/2;t>i;)t-=F;const n=1.27323954*t-.405284735*l(t);return .225*(l(n)-n)+n};function S(t){const n=m(t,2,6);return[n>>16,n>>8&255,n&255]}function W(t,n,e,s){const h=m(t,0,1),a=h%9+1,r=~~(h/9)+1,u=a*r;let o=0,f=0,d=0,g=0,B=0,v=0,O=0,b=0,j=0,y=0,w=0,M=0,q=0,C=0;const U=(m(t,1,2)+1)/13446*(s|1),c=new Float64Array(u*3),k=S(t);for(o=0;o<3;o++)c[o]=G(k[o]);for(o=1;o<u;o++)C=m(t,4+o*2,6+o*2),c[o*3]=l(~~(C/(19*19))-9)*U,c[o*3+1]=l(~~(C/19)%19-9)*U,c[o*3+2]=l(C%19-9)*U;const z=n*4,p=new Uint8ClampedArray(z*e);for(g=0;g<e;g++)for(M=i*g/e,d=0;d<n;d++){for(B=0,v=0,O=0,q=i*d/n,f=0;f<r;f++)for(j=P(M*f),o=0;o<a;o++)b=P(q*o)*j,y=(o+f*a)*3,B+=c[y]*b,v+=c[y+1]*b,O+=c[y+2]*b;w=4*d+g*z,p[w]=R(B),p[w+1]=R(v),p[w+2]=R(O),p[w+3]=255}return p}async function Y(t){const n=t[0],e=t[1],s=t[2],h=W(n,e,s),a=new OffscreenCanvas(e,s),r=a.getContext("2d");if(!r)throw new Error("Could not get context");const u=r.createImageData(e,s);u.data.set(h),r.putImageData(u,0,0);const o=await a.convertToBlob();return URL.createObjectURL(o)}const _=8,I=[];let x=0;self.onconnect=t=>{const n=t.ports[0];n.onmessage=async e=>{I.push({data:e.data,port:n}),await T()}};async function T(){if(x<_&&I.length>0){x++;const t=I.shift();if(!t)return;t.port.postMessage(await Y(t.data)),x--,await T()}}})();
